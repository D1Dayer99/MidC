{"ast":null,"code":"import { PlayingState } from \"../../utils/PlayingState\";\nimport { playlistState, canvasState, keyboardState } from \"@/store/consts/states.js\";\nimport { SET_SHOW_CONFIG, SET_KEY_SIZE, SET_SHOW_NOTES, SET_IS_MOUSE_PRESSED, SET_PLAYING, SET_EDIT_KEYS, SET_SHOW_KEYS, SET_WHITE_NOTE_COLOR, SET_BLACK_NOTE_COLOR, SET_VOLUME, SET_SPEED } from \"@/store/consts/mutation_types.js\";\nimport { changeKeySize, changeVolume, changeSpeed, setPlaying, stopPlaying, whiteKeyColorChanged, blackNoteColorChanged, generateNotes, generateNotesIndexesByKey, pauseTimers, resumeTimers, pauseOrResume, stopSong, changeNoteColors } from \"@/store/consts/actions.js\";\nexport default {\n  namespaced: true,\n  state: {\n    showConfig: false,\n    octaves: [2, 6],\n    maxEndOctave: 8,\n    showNotes: false,\n    editKeys: false,\n    showKeys: false,\n    playing: PlayingState.STOP,\n    whiteNoteColor: \"#BFDBF7\",\n    blackNoteColor: \"#1F7A8C\",\n    volume: 100,\n    speed: 100,\n    defaultSpeed: 100\n  },\n  mutations: {\n    [SET_SHOW_CONFIG](state, showConfig) {\n      state.showConfig = showConfig;\n    },\n    [SET_KEY_SIZE](state, octaves) {\n      if (octaves[0] > octaves[1]) {\n        state.octaves = octaves.reverse();\n      } else {\n        state.octaves = octaves;\n      }\n      // state.octaves = octaves[0] > octaves[1] ? octaves.reverse() : octaves;\n    },\n\n    [SET_SHOW_NOTES](state, showNotes) {\n      state.showNotes = showNotes;\n    },\n    [SET_EDIT_KEYS](state, editKeys) {\n      state.editKeys = editKeys;\n    },\n    [SET_SHOW_KEYS](state, showKeys) {\n      state.showKeys = showKeys;\n    },\n    [SET_IS_MOUSE_PRESSED](state, isMousePressed) {\n      state.isMousePressed = isMousePressed;\n    },\n    [SET_PLAYING](state, playing) {\n      state.playing = playing;\n    },\n    [SET_WHITE_NOTE_COLOR](state, color) {\n      state.whiteNoteColor = color;\n    },\n    [SET_BLACK_NOTE_COLOR](state, color) {\n      state.blackNoteColor = color;\n    },\n    [SET_VOLUME](state, volume) {\n      state.volume = volume;\n    },\n    [SET_SPEED](state, speed) {\n      state.speed = speed;\n    }\n  },\n  actions: {\n    [changeKeySize]({\n      commit,\n      dispatch\n    }, octaves) {\n      commit(SET_KEY_SIZE, octaves);\n      dispatch(keyboardState + \"/\" + generateNotes, {}, {\n        root: true\n      });\n      dispatch(keyboardState + \"/\" + generateNotesIndexesByKey, {}, {\n        root: true\n      });\n    },\n    [changeVolume]({\n      commit,\n      rootState\n    }, volume) {\n      commit(SET_VOLUME, volume);\n      if (volume === 0) {\n        rootState.toneState.sampler.volume.value = -1000;\n      } else {\n        rootState.toneState.sampler.volume.value = volume * 0.5;\n      }\n    },\n    [changeSpeed]({\n      commit,\n      rootState\n    }, speed) {\n      commit(SET_SPEED, speed);\n      rootState.toneState.tone.Transport.bpm.value = speed * 1.2;\n    },\n    [setPlaying]({\n      commit,\n      dispatch\n    }, playing) {\n      if (playing === PlayingState.PAUSE) {\n        dispatch(playlistState + \"/\" + pauseTimers, {}, {\n          root: true\n        });\n      } else {\n        dispatch(playlistState + \"/\" + resumeTimers, {}, {\n          root: true\n        });\n      }\n      dispatch(canvasState + \"/\" + pauseOrResume, playing, {\n        root: true\n      });\n      commit(SET_PLAYING, playing);\n    },\n    [stopPlaying]({\n      commit,\n      dispatch,\n      state,\n      rootState\n    }) {\n      dispatch(canvasState + \"/\" + stopSong, {}, {\n        root: true\n      });\n      commit(SET_PLAYING, PlayingState.STOP);\n      commit(SET_SPEED, state.defaultSpeed);\n      rootState.toneState.tone.Transport.bpm.value = state.defaultSpeed * 1.2;\n    },\n    [whiteNoteColorChanged]({\n      state,\n      commit,\n      dispatch\n    }, color) {\n      commit(SET_WHITE_NOTE_COLOR, color);\n      dispatch(canvasState + \"/\" + changeNoteColors, {\n        whiteNoteColor: state.whiteNoteColor,\n        blackNoteColor: state.blackNoteColor\n      }, {\n        root: true\n      });\n    },\n    [blackNoteColorChanged]({\n      state,\n      commit,\n      dispatch\n    }, color) {\n      commit(SET_BLACK_NOTE_COLOR, color);\n      dispatch(canvasState + \"/\" + changeNoteColors, {\n        whiteNoteColor: state.whiteNoteColor,\n        blackNoteColor: state.blackNoteColor\n      }, {\n        root: true\n      });\n    }\n  }\n};","map":{"version":3,"names":["PlayingState","playlistState","canvasState","keyboardState","SET_SHOW_CONFIG","SET_KEY_SIZE","SET_SHOW_NOTES","SET_IS_MOUSE_PRESSED","SET_PLAYING","SET_EDIT_KEYS","SET_SHOW_KEYS","SET_WHITE_NOTE_COLOR","SET_BLACK_NOTE_COLOR","SET_VOLUME","SET_SPEED","changeKeySize","changeVolume","changeSpeed","setPlaying","stopPlaying","whiteKeyColorChanged","blackNoteColorChanged","generateNotes","generateNotesIndexesByKey","pauseTimers","resumeTimers","pauseOrResume","stopSong","changeNoteColors","namespaced","state","showConfig","octaves","maxEndOctave","showNotes","editKeys","showKeys","playing","STOP","whiteNoteColor","blackNoteColor","volume","speed","defaultSpeed","mutations","reverse","isMousePressed","color","actions","commit","dispatch","root","rootState","toneState","sampler","value","tone","Transport","bpm","PAUSE","whiteNoteColorChanged"],"sources":["/Users/Sunhaoxiang/Desktop/IB_CS/CS_IA/src/store/modules/menuState.js"],"sourcesContent":["import { PlayingState } from \"../../utils/PlayingState\";\nimport { playlistState, canvasState, keyboardState } from \"@/store/consts/states.js\";\nimport { SET_SHOW_CONFIG, \n    SET_KEY_SIZE,\n    SET_SHOW_NOTES,\n    SET_IS_MOUSE_PRESSED,\n    SET_PLAYING,\n    SET_EDIT_KEYS,\n    SET_SHOW_KEYS,\n    SET_WHITE_NOTE_COLOR,\n    SET_BLACK_NOTE_COLOR,\n    SET_VOLUME,\n    SET_SPEED\n  } from \"@/store/consts/mutation_types.js\";\nimport { changeKeySize, \n    changeVolume,\n    changeSpeed,\n    setPlaying,\n    stopPlaying,\n    whiteKeyColorChanged,\n    blackNoteColorChanged,\n    generateNotes,\n    generateNotesIndexesByKey,\n    pauseTimers,\n    resumeTimers,\n    pauseOrResume,\n    stopSong,\n    changeNoteColors\n  } from \"@/store/consts/actions.js\";\n\nexport default {\n    namespaced: true,\n\n    state: {\n        showConfig : false,\n        octaves: [2, 6],\n        maxEndOctave: 8,\n        showNotes: false,\n        editKeys: false,\n        showKeys: false,\n        playing: PlayingState.STOP,\n        whiteNoteColor: \"#BFDBF7\",\n        blackNoteColor: \"#1F7A8C\",\n        volume: 100,\n        speed: 100,\n        defaultSpeed: 100\n    },\n\n    mutations: {\n        [SET_SHOW_CONFIG](state, showConfig){\n            state.showConfig = showConfig;\n        },\n        [SET_KEY_SIZE](state, octaves) {\n            if (octaves[0] > octaves[1]) {\n                state.octaves = octaves.reverse()\n            }\n            else {\n                state.octaves = octaves\n            }\n            // state.octaves = octaves[0] > octaves[1] ? octaves.reverse() : octaves;\n        },\n        [SET_SHOW_NOTES](state, showNotes){\n            state.showNotes = showNotes;\n        },\n        [SET_EDIT_KEYS](state, editKeys) {\n            state.editKeys = editKeys;\n        },\n        [SET_SHOW_KEYS](state, showKeys) {\n            state.showKeys = showKeys;\n        },\n        [SET_IS_MOUSE_PRESSED](state, isMousePressed){\n            state.isMousePressed = isMousePressed;\n        },\n        [SET_PLAYING](state, playing){\n            state.playing = playing;\n        },\n        [SET_WHITE_NOTE_COLOR](state, color){\n            state.whiteNoteColor = color;\n        },\n        [SET_BLACK_NOTE_COLOR](state, color){\n            state.blackNoteColor = color;\n        },\n        [SET_VOLUME](state, volume){\n            state.volume = volume;\n        },\n        [SET_SPEED](state, speed){\n            state.speed = speed;\n        }\n    },\n\n    actions: {\n        [changeKeySize]({ commit, dispatch }, octaves){\n            commit(SET_KEY_SIZE, octaves);\n            dispatch(keyboardState + \"/\" + generateNotes, {}, {root:true});\n            dispatch(keyboardState + \"/\" + generateNotesIndexesByKey, {}, {root:true});\n        }, \n\n        [changeVolume]({ commit, rootState }, volume) {\n            commit(SET_VOLUME, volume);\n            if (volume === 0) {\n                rootState.toneState.sampler.volume.value = -1000;\n            }\n            else {\n                rootState.toneState.sampler.volume.value = volume * 0.5;\n            }\n        },\n\n        [changeSpeed]({ commit, rootState }, speed) {\n            commit(SET_SPEED, speed);\n            rootState.toneState.tone.Transport.bpm.value = speed * 1.2;\n        },\n\n        [setPlaying]({ commit, dispatch }, playing){\n            if(playing === PlayingState.PAUSE){\n                dispatch(playlistState + \"/\" + pauseTimers, {}, {root:true});\n            } else {\n                dispatch(playlistState + \"/\" + resumeTimers, {}, {root:true});\n            }\n\n            dispatch(canvasState + \"/\" + pauseOrResume, playing, {root:true});\n            commit(SET_PLAYING, playing);\n        },\n\n        [stopPlaying]({ commit, dispatch, state, rootState }){\n            dispatch(canvasState + \"/\" + stopSong, {}, {root:true});\n            commit(SET_PLAYING, PlayingState.STOP);\n\n            commit(SET_SPEED, state.defaultSpeed);\n            rootState.toneState.tone.Transport.bpm.value = state.defaultSpeed * 1.2;\n        },\n\n        [whiteNoteColorChanged]({ state, commit, dispatch }, color){\n            commit(SET_WHITE_NOTE_COLOR, color);\n            dispatch(canvasState + \"/\" + changeNoteColors, { whiteNoteColor: state.whiteNoteColor, blackNoteColor : state.blackNoteColor }, {root:true});\n        },\n\n        [blackNoteColorChanged]({ state, commit, dispatch }, color){\n            commit(SET_BLACK_NOTE_COLOR, color);\n            dispatch(canvasState + \"/\" + changeNoteColors, { whiteNoteColor: state.whiteNoteColor, blackNoteColor : state.blackNoteColor }, {root:true});\n        },\n    },\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}