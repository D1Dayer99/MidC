{"ast":null,"code":"import * as Tone from 'tone';\nimport { CREATE_SAMPLER } from \"@/store/consts/mutations.js\";\nimport { createSampler, connectSampler } from \"@/store/consts/actions.js\";\nconst SAMPLE_BASE_URL = \"./notes/\";\nexport default {\n  namespaced: true,\n  state: {\n    sampler: {\n      type: Tone.Sampler,\n      default: {}\n    },\n    tone: Tone,\n    samples: [[\"C0\", \"C#0\", \"D0\", \"D#0\", \"E0\", \"F0\", \"F#0\", \"G0\", \"G#0\", \"A0\", \"A#0\", \"B0\"], [\"C1\", \"C#1\", \"D1\", \"D#1\", \"E1\", \"F1\", \"F#1\", \"G1\", \"G#1\", \"A1\", \"A#1\", \"B1\"], [\"C2\", \"C#2\", \"D2\", \"D#2\", \"E2\", \"F2\", \"F#2\", \"G2\", \"G#2\", \"A2\", \"A#2\", \"B2\"], [\"C3\", \"C#3\", \"D3\", \"D#3\", \"E3\", \"F3\", \"F#3\", \"G3\", \"G#3\", \"A3\", \"A#3\", \"B3\"], [\"C4\", \"C#4\", \"D4\", \"D#4\", \"E4\", \"F4\", \"F#4\", \"G4\", \"G#4\", \"A4\", \"A#4\", \"B4\"], [\"C5\", \"C#5\", \"D5\", \"D#5\", \"E5\", \"F5\", \"F#5\", \"G5\", \"G#5\", \"A5\", \"A#5\", \"B5\"], [\"C6\", \"C#6\", \"D6\", \"D#6\", \"E6\", \"F6\", \"F#6\", \"G6\", \"G#6\", \"A6\", \"A#6\", \"B6\"]]\n  },\n  mutations: {\n    [CREATE_SAMPLER](state, SAMPLE_MAP) {\n      state.sampler = new state.tone.Sampler({\n        urls: SAMPLE_MAP,\n        baseUrl: SAMPLE_BASE_URL\n      }).toDestination();\n    }\n  },\n  actions: {\n    [createSampler]({\n      commit,\n      state\n    }) {\n      const SAMPLE_MAP = state.samples.flat().reduce((acc, val) => {\n        acc[val] = `${val.replace(\"#\", \"s\")}.mp3`;\n        return acc;\n      }, {});\n      commit(CREATE_SAMPLER, SAMPLE_MAP);\n    },\n    [connectSampler]({\n      state\n    }, dest) {\n      state.sampler.connect(dest);\n    }\n  }\n};","map":{"version":3,"names":["Tone","CREATE_SAMPLER","createSampler","connectSampler","SAMPLE_BASE_URL","namespaced","state","sampler","type","Sampler","default","tone","samples","mutations","SAMPLE_MAP","urls","baseUrl","toDestination","actions","commit","flat","reduce","acc","val","replace","dest","connect"],"sources":["/Users/Sunhaoxiang/Desktop/IB_CS/CS_IA/src/store/modules/toneState.js"],"sourcesContent":["import * as Tone from 'tone'\nimport { CREATE_SAMPLER } from \"@/store/consts/mutations.js\";\nimport { createSampler, connectSampler,} from \"@/store/consts/actions.js\";\n\nconst SAMPLE_BASE_URL = \"./notes/\";\n\nexport default {\n    namespaced: true,\n\n    state: {\n        sampler: { type: Tone.Sampler, default: {} },\n        tone : Tone,\n\n        samples: [\n            [\"C0\", \"C#0\", \"D0\", \"D#0\", \"E0\", \"F0\", \"F#0\", \"G0\", \"G#0\", \"A0\", \"A#0\", \"B0\"],\n            [\"C1\", \"C#1\", \"D1\", \"D#1\", \"E1\", \"F1\", \"F#1\", \"G1\", \"G#1\", \"A1\", \"A#1\", \"B1\"],\n            [\"C2\", \"C#2\", \"D2\", \"D#2\", \"E2\", \"F2\", \"F#2\", \"G2\", \"G#2\", \"A2\", \"A#2\", \"B2\"],\n            [\"C3\", \"C#3\", \"D3\", \"D#3\", \"E3\", \"F3\", \"F#3\", \"G3\", \"G#3\", \"A3\", \"A#3\", \"B3\"],\n            [\"C4\", \"C#4\", \"D4\", \"D#4\", \"E4\", \"F4\", \"F#4\", \"G4\", \"G#4\", \"A4\", \"A#4\", \"B4\"],\n            [\"C5\", \"C#5\", \"D5\", \"D#5\", \"E5\", \"F5\", \"F#5\", \"G5\", \"G#5\", \"A5\", \"A#5\", \"B5\"],\n            [\"C6\", \"C#6\", \"D6\", \"D#6\", \"E6\", \"F6\", \"F#6\", \"G6\", \"G#6\", \"A6\", \"A#6\", \"B6\"],\n        ],\n    },\n\n    mutations: {\n        [CREATE_SAMPLER](state, SAMPLE_MAP) {\n            state.sampler = new state.tone.Sampler({\n                urls: SAMPLE_MAP,\n                baseUrl: SAMPLE_BASE_URL\n            }).toDestination();\n        },\n    },\n\n    actions: {\n        [createSampler]({ commit, state }){\n            const SAMPLE_MAP = state.samples.flat().reduce((acc, val) => {\n                acc[val] = `${val.replace(\"#\", \"s\")}.mp3`;\n                return acc;\n            }, {});\n            \n            commit(CREATE_SAMPLER, SAMPLE_MAP);\n        },\n        [connectSampler]({state}, dest){\n            state.sampler.connect(dest);\n        }\n    }\n}"],"mappings":"AAAA,OAAO,KAAKA,IAAI,MAAM,MAAM;AAC5B,SAASC,cAAc,QAAQ,6BAA6B;AAC5D,SAASC,aAAa,EAAEC,cAAc,QAAQ,2BAA2B;AAEzE,MAAMC,eAAe,GAAG,UAAU;AAElC,eAAe;EACXC,UAAU,EAAE,IAAI;EAEhBC,KAAK,EAAE;IACHC,OAAO,EAAE;MAAEC,IAAI,EAAER,IAAI,CAACS,OAAO;MAAEC,OAAO,EAAE,CAAC;IAAE,CAAC;IAC5CC,IAAI,EAAGX,IAAI;IAEXY,OAAO,EAAE,CACL,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC7E,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC7E,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC7E,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC7E,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC7E,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC7E,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC;EAErF,CAAC;EAEDC,SAAS,EAAE;IACP,CAACZ,cAAc,EAAEK,KAAK,EAAEQ,UAAU,EAAE;MAChCR,KAAK,CAACC,OAAO,GAAG,IAAID,KAAK,CAACK,IAAI,CAACF,OAAO,CAAC;QACnCM,IAAI,EAAED,UAAU;QAChBE,OAAO,EAAEZ;MACb,CAAC,CAAC,CAACa,aAAa,EAAE;IACtB;EACJ,CAAC;EAEDC,OAAO,EAAE;IACL,CAAChB,aAAa,EAAE;MAAEiB,MAAM;MAAEb;IAAM,CAAC,EAAC;MAC9B,MAAMQ,UAAU,GAAGR,KAAK,CAACM,OAAO,CAACQ,IAAI,EAAE,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;QACzDD,GAAG,CAACC,GAAG,CAAC,GAAI,GAAEA,GAAG,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAE,MAAK;QACzC,OAAOF,GAAG;MACd,CAAC,EAAE,CAAC,CAAC,CAAC;MAENH,MAAM,CAAClB,cAAc,EAAEa,UAAU,CAAC;IACtC,CAAC;IACD,CAACX,cAAc,EAAE;MAACG;IAAK,CAAC,EAAEmB,IAAI,EAAC;MAC3BnB,KAAK,CAACC,OAAO,CAACmB,OAAO,CAACD,IAAI,CAAC;IAC/B;EACJ;AACJ,CAAC"},"metadata":{},"sourceType":"module"}